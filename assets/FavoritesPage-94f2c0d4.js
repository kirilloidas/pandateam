import{d as p,o as n,c as F,a as l,t as k,b as S,e as d,w as y,W as x,C as D,p as N,f as W,_ as w,u as B,r as m,g as I,h as f,D as J,i as O,j as b,F as V,k as $}from"./index-c2823112.js";const E=s=>(N("data-v-1cecc5f2"),s=s(),W(),s),P={class:"favorite-section"},j={class:"favorite-section__header header"},G={class:"header__name"},H=E(()=>l("i",{class:"fa fa-star"},null,-1)),L=p({__name:"FavoriteCity",props:{item:null},emits:["removeFromFavorites"],setup(s){return(i,c)=>(n(),F("section",P,[l("div",j,[l("h4",G,k(s.item.city.name),1),l("button",{class:"favorite-section__btn",onClick:c[0]||(c[0]=a=>i.$emit("removeFromFavorites",s.item.city.id))},[H,S(" Удалить из Избранного ")])]),d(D,{list:s.item.list},{item:y(({item:a})=>[d(x,{item:a},null,8,["item"])]),_:1},8,["list"])]))}});const M=w(L,[["__scopeId","data-v-1cecc5f2"]]),T=p({__name:"FavoritesPage",setup(s){const{favoritesStorage:i,removeFavorite:c}=B(),a=m([]),r=m([]),h=async e=>{const t=o=>$(o);return Promise.allSettled(e.map(t)).then(o=>o.forEach(v=>{if(v.status==="fulfilled"){const _=v.value;a.value.push(_.data),r.value.push(_.data)}}))},C=e=>{c(e),r.value=r.value.filter(t=>t.city.id!==e),a.value=a.value.filter(t=>t.city.id!==e)},u=()=>{a.value=JSON.parse(JSON.stringify(r.value)).map(e=>(e.list=O(e.list.map(t=>(t.dt_txt=t.dt_txt.split(" ")[1],t))),e))},g=()=>{a.value=JSON.parse(JSON.stringify(r.value))};return I(()=>{i.value&&h(i.value).then(u)}),(e,t)=>(n(),f(J,{onClickDay:u,onClickWeek:g},{default:y(()=>[(n(!0),F(V,null,b(a.value,o=>(n(),f(M,{key:o.city.id,item:o,onRemoveFromFavorites:C},null,8,["item"]))),128))]),_:1}))}});export{T as default};
